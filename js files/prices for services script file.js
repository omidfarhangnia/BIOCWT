var Dub = [
    {
        priceKS : "224",
        priceM3 : "2000",
        m3 : "0,0032",
        thickness : "20",
        width : "200",
        length: "800"
    } , 
    {
        priceKS : "252",
        priceM3 : "2000",
        m3 : "0,0036",
        thickness : "20",
        width : "200",
        length: "900"
    } , 
    {
        priceKS : "2352",
        priceM3 : "2000",
        m3 : "0,00336",
        thickness : "40",
        width : "600",
        length: "1400"
    } , 
    {
        priceKS : "2548",
        priceM3 : "2000",
        m3 : "0,00364",
        thickness : "40",
        width : "650",
        length: "1400"
    } , 
    {
        priceKS : "2520",
        priceM3 : "2000",
        m3 : "0,036",
        thickness : "40",
        width : "600",
        length: "1500"
    } , 
    {
        priceKS : "2688",
        priceM3 : "2000",
        m3 : "0,0384",
        thickness : "40",
        width : "600",
        length: "1600"
    } , 
    {
        priceKS : "2856",
        priceM3 : "2000",
        m3 : "0,0408",
        thickness : "40",
        width : "600",
        length: "1700"
    } , 
    {
        priceKS : "3024",
        priceM3 : "2000",
        m3 : "0,0432",
        thickness : "40",
        width : "600",
        length: "1800"
    } , 
    {
        priceKS : "3990",
        priceM3 : "2500",
        m3 : "0,0456",
        thickness : "40",
        width : "600",
        length: "1900"
    } , 
    {
        priceKS : "4200",
        priceM3 : "2500",
        m3 : "0,048",
        thickness : "40",
        width : "600",
        length: "2000"
    } , 
    {
        priceKS : "4410",
        priceM3 : "2500",
        m3 : "0,0504",
        thickness : "40",
        width : "600",
        length: "2100"
    } , 
    {
        priceKS : "4620",
        priceM3 : "2500",
        m3 : "0,0528",
        thickness : "40",
        width : "600",
        length: "2200"
    } , 
    {
        priceKS : "4830",
        priceM3 : "2500",
        m3 : "0,0552",
        thickness : "40",
        width : "600",
        length: "2300"
    } , 
    {
        priceKS : "5040",
        priceM3 : "2500",
        m3 : "0,0576",
        thickness : "40",
        width : "600",
        length: "2400"
    } , 
    {
        priceKS : "5250",
        priceM3 : "2500",
        m3 : "0,06",
        thickness : "40",
        width : "600",
        length: "2500"
    } , 
    {
        priceKS : "6142,5",
        priceM3 : "2500",
        m3 : "0,0702",
        thickness : "40",
        width : "650",
        length: "2700"
    } , 
    {
        priceKS : "6825",
        priceM3 : "2500",
        m3 : "0,078",
        thickness : "40",
        width : "650",
        length: "3000"
    } , 
    {
        priceKS : "8645",
        priceM3 : "2500",
        m3 : "0,0988",
        thickness : "40",
        width : "650",
        length: "3800"
    } , 
    {
        priceKS : "6188",
        priceM3 : "1700",
        m3 : "0,104",
        thickness : "40",
        width : "650",
        length: "4000"
    } , 
    {
        priceKS : "840",
        priceM3 : "2000",
        m3 : "0,012",
        thickness : "40",
        width : "300",
        length: "1000"
    } , 
    {
        priceKS : "924",
        priceM3 : "2000",
        m3 : "0,0132",
        thickness : "40",
        width : "300",
        length: "1100"
    } , 
    {
        priceKS : "1008",
        priceM3 : "2000",
        m3 : "0,0144",
        thickness : "40",
        width : "300",
        length: "1200"
    } , 
    {
        priceKS : "1092",
        priceM3 : "2000",
        m3 : "0,0156",
        thickness : "40",
        width : "300",
        length: "1300"
    } , 
    {
        priceKS : "672",
        priceM3 : "2000",
        m3 : "0,0096",
        thickness : "40",
        width : "300",
        length: "800"
    } , 
    {
        priceKS : "756",
        priceM3 : "2000",
        m3 : "0,0108",
        thickness : "40",
        width : "300",
        length: "900"
    } , 
    {
        priceKS : "2142",
        priceM3 : "1700",
        m3 : "0,036",
        thickness : "40",
        width : "300",
        length: "3000"
    } , 
    {
        priceKS : "2856",
        priceM3 : "1700",
        m3 : "0,048",
        thickness : "40",
        width : "300",
        length: "4000"
    } , 
    {
        priceKS : "1411,2",
        priceM3 : "2000",
        m3 : "0,02016",
        thickness : "20",
        width : "630",
        length: "1600"
    } , 
    {
        priceKS : "1499,4",
        priceM3 : "2000",
        m3 : "0,02142",
        thickness : "20",
        width : "630",
        length: "1700"
    } , 
    {
        priceKS : "1587,6",
        priceM3 : "2000",
        m3 : "0,02268",
        thickness : "20",
        width : "630",
        length: "1800"
    } , 
    {
        priceKS : "2094,75",
        priceM3 : "2500",
        m3 : "0,02394",
        thickness : "20",
        width : "630",
        length: "1900"
    } , 
    {
        priceKS : "2205",
        priceM3 : "2500",
        m3 : "0,0252",
        thickness : "20",
        width : "630",
        length: "2000"
    } , 
    {
        priceKS : "2315,25",
        priceM3 : "2500",
        m3 : "0,02646",
        thickness : "20",
        width : "630",
        length: "2100"
    } , 
    {
        priceKS : "2756,25",
        priceM3 : "2500",
        m3 : "0,0315",
        thickness : "20",
        width : "630",
        length: "2500"
    } , 
    {
        priceKS : "1071",
        priceM3 : "1700",
        m3 : "0,018",
        thickness : "20",
        width : "300",
        length: "3000"
    } , 
    {
        priceKS : "1428",
        priceM3 : "1700",
        m3 : "0,018",
        thickness : "20",
        width : "300",
        length: "4000"
    }
]
var Jasan = [
    {
        priceKS : "261,8",
        priceM3 : "1700",
        m3 : "0,0044",
        thickness : "20",
        width : "200",
        length : "1000"
    } , 
    {
        priceKS : "190,4",
        priceM3 : "1700",
        m3 : "0,0032",
        thickness : "20",
        width : "200",
        length : "800"
    } , 
    {
        priceKS : "214,2",
        priceM3 : "1700",
        m3 : "0,0036",
        thickness : "20",
        width : "200",
        length : "900"
    } , 
    {
        priceKS : "3427,2",
        priceM3 : "1700",
        m3 : "0,0576",
        thickness : "40",
        width : "900",
        length : "1600"
    } ,    
    {
        priceKS : "3641,4",
        priceM3 : "1700",
        m3 : "0,0612",
        thickness : "40",
        width : "900",
        length : "1700"
    } , 
    {
        priceKS : "3855,6",
        priceM3 : "1700",
        m3 : "0,0648",
        thickness : "40",
        width : "900",
        length : "1800"
    } , 
    {
        priceKS : "4788",
        priceM3 : "2000",
        m3 : "0,0684",
        thickness : "40",
        width : "900",
        length : "1900"
    } , 
    {
        priceKS : "4186",
        priceM3 : "2000",
        m3 : "0,0598",
        thickness : "40",
        width : "650",
        length : "2300"
    } , 
    {
        priceKS : "4550",
        priceM3 : "2000",
        m3 : "0,065",
        thickness : "40",
        width : "650",
        length : "2500"
    } , 
    {
        priceKS : "5278",
        priceM3 : "2000",
        m3 : "0,0754",
        thickness : "40",
        width : "650",
        length : "2900"
    } , 
    {
        priceKS : "5460",
        priceM3 : "2000",
        m3 : "0,078",
        thickness : "40",
        width : "650",
        length : "3000"
    } , 
    {
        priceKS : "1008",
        priceM3 : "1500",
        m3 : "0,0192",
        thickness : "80",
        width : "80",
        length : "3000"
    } , 
    {
        priceKS : "1344",
        priceM3 : "1500",
        m3 : "0,0256",
        thickness : "80",
        width : "80",
        length : "4000"
    } , 
    {
        priceKS : "714",
        priceM3 : "1700",
        m3 : "0,012",
        thickness : "40",
        width : "300",
        length : "1000"
    } , 
    {
        priceKS : "856,8",
        priceM3 : "1700",
        m3 : "0,0144",
        thickness : "40",
        width : "300",
        length : "1200"
    } , 
    {
        priceKS : "928,2",
        priceM3 : "1700",
        m3 : "0,0156",
        thickness : "40",
        width : "300",
        length : "1300"
    } ,
    {
        priceKS : "571,2",
        priceM3 : "1700",
        m3 : "0,0096",
        thickness : "40",
        width : "300",
        length : "800"
    } , 
    {
        priceKS : "642,6",
        priceM3 : "2000",
        m3 : "0,0108",
        thickness : "40",
        width : "300",
        length : "900"
    } , 
    {
        priceKS : "1890",
        priceM3 : "1500",
        m3 : "0,036",
        thickness : "40",
        width : "300",
        length : "3000"
    } , 
    {
        priceKS : "2520",
        priceM3 : "1500",
        m3 : "0,048",
        thickness : "40",
        width : "300",
        length : "4000"
    } , 
    {
        priceKS : "4233,6",
        priceM3 : "2000",
        m3 : "0,06048",
        thickness : "40",
        width : "630",
        length : "2400"
    } , 
    {
        priceKS : "2205",
        priceM3 : "2000",
        m3 : "0,0315",
        thickness : "20",
        width : "630",
        length : "2500"
    } , 
    {
        priceKS : "2293,2",
        priceM3 : "2000",
        m3 : "0,03276",
        thickness : "20",
        width : "630",
        length : "2600"
    } , 
    {
        priceKS : "2469,6",
        priceM3 : "2000",
        m3 : "0,03528",
        thickness : "20",
        width : "630",
        length : "2800"
    } , 
    {
        priceKS : "2557,8",
        priceM3 : "2000",
        m3 : "0,03654",
        thickness : "20",
        width : "630",
        length : "2900"
    } , 
    {
        priceKS : "2646",
        priceM3 : "2000",
        m3 : "0,0378",
        thickness : "20",
        width : "630",
        length : "3000"
    }
] 
var DubAndJasan = [];
for(var i = 0; i < Dub.length; i++){
    DubAndJasan.push(Dub[i])
}
for(var i = 0; i < Jasan.length; i++){
    DubAndJasan.push(Jasan[i])
}
window.addEventListener("load" , () => {
    MakeHeaderForTable("Dub" , Dub , "Price__list__table__body--Dub");
    MakeDataCellForTable(Dub , "Price__list__table__body--Dub");
    MakeHeaderForTable("Jasan" , Jasan , "Price__list__table__body--Jasan");
    MakeDataCellForTable(Jasan , "Price__list__table__body--Jasan");
})
function MakeHeaderForTable(arrayName , array , element) {
    var PriceListTableHead = document.getElementById(`${element}`);
    var StartingTr = `<tr>`;
    var allTds = "";
    var EndingTr = `</tr>`;
    var KeysForTableHead = Object.keys(array[0]).reverse();
    // man dar inja be dalil baraks vared kardan kilid ha majboram as reverse
    // estefade bokonam ta be halat aval bargardan
    for(let i = 0; i < KeysForTableHead.length; i++){
        allTds += `<th scope="col" class="table__headers">${KeysForTableHead[i]}</th>`;
    }
    PriceListTableHead.innerHTML = StartingTr + `<th rowspan="${array.length + 1}" class="table__headers">${arrayName}</th>` + allTds + EndingTr;
}
function MakeDataCellForTable(array , element) {
    var PriceListTableBody = document.getElementById(`${element}`);
    var StartingTr = `<tr>`;
    var allTds = "";
    var EndingTr = `</tr>`;
    for(let i = 0; i < array.length; i++){
        let priceKS = `<td class="table__datas Price__backgroundColor"> ${array[i].priceKS} </td>`;
        let priceM3 = `<td class="table__datas"> ${array[i].priceM3} </td>`;
        let m3 = `<td class="table__datas"> ${array[i].m3} </td>`;
        let thickness = `<td class="table__datas"> ${array[i].thickness} </td>`;
        let width = `<td class="table__datas"> ${array[i].width} </td>`;
        let length = `<td class="table__datas"> ${array[i].length} </td>`;
        let OneOfTds  = StartingTr + length + width + thickness + m3 + priceM3 + priceKS + EndingTr;
        allTds += OneOfTds;
    }
    PriceListTableBody.innerHTML += allTds;
}
// ReadMore And ReadLess Button for Prices tabels
const ReadMoreButtons = document.querySelectorAll(".read__more__btn");
const ReadLessButtons = document.querySelectorAll(".read__Less__btn");
ReadMoreButtons.forEach(AddEventToReadMore)
ReadLessButtons.forEach(AddEventToLessMore)
function AddEventToReadMore(element){
    element.addEventListener("click" , () => {
        MakeItActive(element)
        RemovingBtn(element)
    })
}
function AddEventToLessMore(element){
    element.addEventListener("click" , () => {
        MakeItINActive(element)
        RemovingBtn(element)  
    })
}
function MakeItActive(element){
    const Table = element.parentNode;
    Table.classList.add("Active__table")
}
function MakeItINActive(element){
    const Table = element.parentNode;
    Table.classList.remove("Active__table")
}
function RemovingBtn(element){
    element.classList.add("d-none");
    var NextElement = element.nextElementSibling;
    var PervElement = element.previousElementSibling;
    if(NextElement != null){
        NextElement.classList.remove("d-none");
    }else{
        PervElement.classList.remove("d-none");
    }
}
// Live Min And Max for Inputs

const InputWoodSelecting = document.getElementById("InputWoodSelecting");
const InputLengthSelecting = document.getElementById("InputLengthSelecting");
const InputWidthSelecting = document.getElementById("InputWidthSelecting");
const InputthicknessSelecting = document.getElementById("InputthicknessSelecting");

InputWoodSelecting.addEventListener("change" , () => {
    var SelectedOption = InputWoodSelecting.value;
    if(SelectedOption == "Not Selected"){
        WoodIsSelected(DubAndJasan);
    }
    else if(SelectedOption == "Dub"){
        WoodIsSelected(Dub)
    }
    else if(SelectedOption == "Jasan"){
        WoodIsSelected(Jasan)
    }
})
function WoodIsSelected(array){
    var HighestAndLowest = FindHighestAndLowest(array);
    ChooseMinAndMax(HighestAndLowest)
    ChooseOptionsForThickness(HighestAndLowest)
}
function FindHighestAndLowest(array){
    var HighestAndLowest = {
        length : [],
        width : [],
        thicknessAvailable : [],
        priceM3 : [],
    };

    HighestAndLowest.length = FindHighestAndLowestLength(array);
    HighestAndLowest.width = FindHighestAndLowestWidth(array);
    HighestAndLowest.thicknessAvailable = FindAllthicknessAvailable(array);
    HighestAndLowest.priceM3 = FindHighestAndLowestPriceM3(array);

    return HighestAndLowest;
}
function FindHighestAndLowestLength(array){
    var LowestAndHighestLength = {
        HighestLength : -Infinity ,
        LowestLength : Infinity
    }
    for(var i = 0; i < array.length; i++){
        if(LowestAndHighestLength.HighestLength <= Number(array[i].length)){
            LowestAndHighestLength.HighestLength = array[i].length;
        }
        if(LowestAndHighestLength.LowestLength >= Number(array[i].length)){
            LowestAndHighestLength.LowestLength = array[i].length;
        }
    }
    return LowestAndHighestLength;
}
function FindHighestAndLowestWidth(array){
    var LowestAndHighestWidth = {
        HighestWidth : -Infinity ,
        LowestWidth : Infinity
    }
    for(var i = 0; i < array.length; i++){
        if(LowestAndHighestWidth.HighestWidth <= Number(array[i].width)){
            LowestAndHighestWidth.HighestWidth = array[i].width;
        }
        if(LowestAndHighestWidth.LowestWidth >= Number(array[i].width)){
            LowestAndHighestWidth.LowestWidth = array[i].width;
        }
    }
    return LowestAndHighestWidth;
}
function FindAllthicknessAvailable(array){
    var thicknessAvailable = new Set();
    for(var i = 0 ; i < array.length; i++){
        thicknessAvailable.add(array[i].thickness)
    }
    thicknessAvailable = [...thicknessAvailable]
    return thicknessAvailable
}
function FindHighestAndLowestPriceM3(array){
    var LowestAndHighestPriceM3 = {
        HighestPriceM3 : -Infinity ,
        LowestPriceM3 : Infinity
    }
    for(var i = 0; i < array.length; i++){
        if(LowestAndHighestPriceM3.HighestPriceM3 <= Number(array[i].priceM3)){
            LowestAndHighestPriceM3.HighestPriceM3 = array[i].priceM3;
        }
        if(LowestAndHighestPriceM3.LowestPriceM3 >= Number(array[i].priceM3)){
            LowestAndHighestPriceM3.LowestPriceM3 = array[i].priceM3;
        }
    }
    return LowestAndHighestPriceM3;
}
function ChooseMinAndMax(HighestAndLowest){
    InputLengthSelecting.setAttribute("min" , HighestAndLowest.length.LowestLength);
    InputLengthSelecting.setAttribute("value" , HighestAndLowest.length.LowestLength);
    InputLengthSelecting.setAttribute("max" , HighestAndLowest.length.HighestLength);

    InputWidthSelecting.setAttribute("min" , HighestAndLowest.width.LowestWidth);
    InputWidthSelecting.setAttribute("value" , HighestAndLowest.width.LowestWidth);
    InputWidthSelecting.setAttribute("max" , HighestAndLowest.width.HighestWidth);

    InputthicknessSelecting.setAttribute("min" , HighestAndLowest.priceM3.LowestPriceM3);
    InputthicknessSelecting.setAttribute("value" , HighestAndLowest.priceM3.LowestPriceM3);
    InputthicknessSelecting.setAttribute("max" , HighestAndLowest.priceM3.HighestPriceM3);
} 
function ChooseOptionsForThickness(HighestAndLowest){
    var OptionOpenTag = `<option>`;
    var ThicknessInputOptions = `<option selected>Not Selected</option>`;
    var OptionCloseTag = `</option>`;
    for(var i = 0; i < HighestAndLowest.thicknessAvailable.length; i++){
        ThicknessInputOptions += `${OptionOpenTag} ${HighestAndLowest.thicknessAvailable[i]} ${OptionCloseTag}`
    }
    InputthicknessSelecting.innerHTML = ThicknessInputOptions;

}
// giving filter data and set them
const PriceListTablesFilter = document.getElementById("Price__list__table__body--filter");
const FilterIsEmptyMessage = document.getElementById("Filter__IsEmpty__Message")
const InputPriceM3Selecting = document.getElementById("InputPriceM3Selecting");
const InputPriceKSSelecting = document.getElementById("InputPriceKSSelecting");
const SetFilterBtn = document.getElementById("SetFilterBtn");

SetFilterBtn.addEventListener("click" , () => {
    let InputValues = GetValues();
    let ArraysWithThisFilter = CheckTheFilter(InputValues);

    if(ArraysWithThisFilter.length != 0){
        FilterIsEmptyMessage.classList.add("d-none");
        PriceListTablesFilter.classList.remove("d-none");
        MakeHeaderForTable(InputValues.TheSelectedWoodName , ArraysWithThisFilter , "Price__list__table__body--filter");
        MakeDataCellForTable(ArraysWithThisFilter , "Price__list__table__body--filter");
    }else{
        FilterIsEmptyMessage.classList.remove("d-none");
        PriceListTablesFilter.classList.add("d-none");
        PriceListTablesFilter.innerHTML = "<span></span>";
    }
})
function GetValues(){
    let InputValueContainer = {
        TheSelectedWoodName : '' ,
        TheObjectOfSelectWood : {},
        length : '',
        width : '',
        thickness : '',
        priceM3 : '',
        priceKS : '',
    }
    InputValueContainer.TheSelectedWoodName = (InputWoodSelecting.value == "Not Selected") ? "Dub & Jasan" : InputWoodSelecting.value;
    InputValueContainer.TheObjectOfSelectWood = FindTheSelectedWood()
    InputValueContainer.length = InputLengthSelecting.value;
    InputValueContainer.width = InputWidthSelecting.value;
    InputValueContainer.thickness = InputthicknessSelecting.value;
    InputValueContainer.priceM3 = InputPriceM3Selecting.value;
    InputValueContainer.priceKS = InputPriceKSSelecting.value;
    return InputValueContainer;
}
function FindTheSelectedWood(){
    var SelectedValue = InputWoodSelecting.value;
    if(SelectedValue == "Dub"){
        return Dub;
    }
    else if(SelectedValue == "Jasan"){
        return Jasan;
    }
    else{
        return DubAndJasan;
    }
}
function CheckTheFilter(InputValues){
    let ArraysWithThisFilter = []
    for(var i = 0; i < InputValues.TheObjectOfSelectWood.length; i++){
        if(InputValues.TheObjectOfSelectWood[i].length == InputValues.length ||  InputValues.length == ""){
            if(InputValues.TheObjectOfSelectWood[i].width == InputValues.width || InputValues.width == ""){
                if(InputValues.TheObjectOfSelectWood[i].thickness == InputValues.thickness || InputValues.thickness == "Not Selected"){
                    if(InputValues.TheObjectOfSelectWood[i].priceM3 == InputValues.priceM3 || InputValues.priceM3 == ""){
                        if(InputValues.TheObjectOfSelectWood[i].priceKS == InputValues.priceKS || InputValues.priceKS == ""){
                            ArraysWithThisFilter.push(InputValues.TheObjectOfSelectWood[i])
                        }
                    }
                }
            }
        }
    }
    return ArraysWithThisFilter;
}